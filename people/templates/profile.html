{% extends "layout.html" %}
{% set activePage = "profile" %}
{% block title %}Profile of {{user.firstName}} {{user.lastName}}{% endblock %}
{% block body %}

<div class="ui grid">
    <div class="two column row">
        <div class="column">
            <div class="ui card">
                <div class="image">
                {% if profile.image %}
                    <img class="ui medium bordered image" src="{{url_for('static', filename = 'images/' + profile.image)}}">
                {% else %}
                    <img class="ui medium bordered image" src="{{url_for('static', filename = 'images/people_p.png')}}">
                {% endif %}
                </div>
                <div class="content">
                    <a class="header">{{user.firstName}} {{user.lastName}}</a>
                    <div class="meta">
                        <span class="date"></span>
                    </div>
                    <div class="description">
                        <strong>About {{user.firstName}}:</strong>
                        {{profile.about}}
                    </div>
                </div>
                <div class="extra content">
                    <a href="{{ url_for('index') }}">
                        <i class="user icon"></i>
                        friends 
                    </a>
                </div>
            </div>
        {% if user.id == current_user.id %}
            <a href="{{url_for('editProfile', username=current_user.id)}}">Edit profile</a>
        {% else %}
            {% set is_sent = [] %}
            {% for request in pendingFriends %}
            {% if request.to_user_id == current_user.id or request.from_user_id == current_user.id %}
                <p>Friendrequest sent</p>
                {% if is_sent.append(1) %} {% endif %}
            {% endif %}
            {% endfor %}
            {% if not is_sent %}
                <a href="{{url_for('addFriend', fromUser=current_user.id, toUser=profile.userid)}}">Add as friend</a>
            {% endif %}
        {% endif %}
        </div>
        <div class="column">
            <h2>Account Information</h2>
            <div class="ui grid">
                <div class="two column row">
                    <div class="column">
                        Name: <br>
                        Signed up at: <br>
                        Last Update: <br>
                    </div>
                    <div class="column">
                        {{user.firstName}} {{user.lastName}} <br>
                        {{user.created_at}} <br>
                        {{profile.updated_at}} <br>
                    </div>
                </div>
            </div>
            <h2>Basic Information</h2>
            <div class="ui grid">
                <div class="two column row">
                    <div class="column">
                        Gender: <br>
                        Birthday: <br>
                    </div>
                    <div class="column">
                        {{profile.gender}}<br>
                        {{profile.birthday}} <br>
                    </div>
                </div>
            </div>
            <h2>Education</h2>
            <div class="ui grid">
                <div class="two column row">
                    <div class="column">
                        Major: <br>
                        Semester: <br>
                    </div>
                    <div class="column">
                        {{profile.major}}<br>
                        {{profile.semester}} <br>
                    </div>
                </div>
            </div>
            <h2>Contact Information</h2>
            <div class="ui grid">
                <div class="two column row">
                    <div class="column">
                        Email: <br>
                        Phone: <br>
                        Mobile: <br>
                        Jabber: <br>
                        Address: <br>
                    </div>
                    <div class="column">
                        {{user.email}} <br>
                        {{profile.phone}} <br>
                        {{profile.mobile}} <br>
                        {{profile.jabber}} <br>
                        {{profile.street}} <br>
                        {{profile.zipcode}} {{profile.city}}
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
{% endblock %}